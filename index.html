<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CYBERPUNK AGENCY | ELITE CYBERSECURITY</title>
    
    <!-- LIBRARIES -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    
    <style>
        /* --- CORE STYLES --- */
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Syncopate:wght@400;700&display=swap');

        :root {
            --neon-cyan: #00ffff;
            --neon-pink: #ff00ff; /* Kept for critical alerts only */
            --matrix-green: #00ff41; /* Classic Matrix Green */
            --matrix-dark-green: #008F11;
            --bg-dark: #050505;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: #000;
            color: #fff;
            font-family: 'Share Tech Mono', monospace;
            overflow-x: hidden;
            /* Height is controlled by Virtual Scroll via JS */
            height: 100vh;
        }

        /* --- CANVASES --- */
        #matrix-bg {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 0;
            opacity: 0.25; /* Increased visibility slightly */
            pointer-events: none;
        }

        #webgl-canvas {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 1;
            pointer-events: none;
        }

        /* --- SCANLINES & VIGNETTE --- */
        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: linear-gradient(transparent 50%, rgba(0, 255, 65, 0.02) 50%);
            background-size: 100% 4px;
            animation: scanlines 0.2s linear infinite;
            pointer-events: none;
            z-index: 999;
        }
        body::after {
            content: '';
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: radial-gradient(circle, transparent 50%, #000 100%);
            pointer-events: none;
            z-index: 998;
        }

        @keyframes scanlines {
            0% { transform: translateY(0); }
            100% { transform: translateY(4px); }
        }

        /* --- UI LAYER --- */
        #ui-layer {
            position: relative;
            z-index: 10;
        }

        section {
            height: 100vh;
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: absolute;
            top: 0; left: 0;
            opacity: 0; /* Controlled by GSAP */
            pointer-events: none;
            padding: 2rem;
        }

        h1, h2, h3 {
            font-family: 'Syncopate', sans-serif;
            text-transform: uppercase;
        }

        /* --- HERO SECTION (MOUSE REVEAL) --- */
        #hero {
            opacity: 1;
            pointer-events: auto;
        }

        .hero-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 2rem; /* Added gap to prevent overlap */
        }

        .text-layer {
            position: absolute;
            text-align: center;
            top: 40%; /* Positioned slightly up to make room for button */
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
        }

        .base-layer h1 {
            font-size: 7vw;
            color: transparent;
            -webkit-text-stroke: 1px rgba(0, 255, 65, 0.3); /* Green stroke */
            margin-bottom: 1rem;
        }

        .reveal-layer {
            clip-path: circle(0px at 0 0);
            transition: clip-path 0.1s ease-out;
            z-index: 20;
        }

        .reveal-layer h1 {
            font-size: 7vw;
            color: var(--matrix-green);
            text-shadow: 0 0 20px var(--matrix-green);
            margin-bottom: 1rem;
        }

        .terminal-text {
            color: var(--matrix-green);
            font-size: 1.2rem;
            margin-top: 0.5rem;
            text-shadow: 0 0 5px var(--matrix-green);
            background: rgba(0,0,0,0.5);
            padding: 5px 10px;
        }

        .cta-btn {
            margin-top: 250px; /* Explicit margin to push it below the text */
            padding: 20px 50px;
            background: transparent;
            border: 1px solid var(--matrix-green);
            color: var(--matrix-green);
            font-family: 'Syncopate';
            font-weight: 700;
            letter-spacing: 4px;
            cursor: pointer;
            transition: 0.3s;
            position: relative;
            overflow: hidden;
            z-index: 30;
            text-shadow: 0 0 10px var(--matrix-dark-green);
            box-shadow: 0 0 10px rgba(0, 255, 65, 0.1);
        }

        .cta-btn:hover {
            background: var(--matrix-green);
            color: #000;
            box-shadow: 0 0 30px var(--matrix-green);
        }

        /* --- NARRATIVE TEXT BLOCKS --- */
        .story-block {
            max-width: 800px;
            text-align: center;
            background: rgba(0, 10, 0, 0.85);
            border: 1px solid var(--matrix-dark-green);
            padding: 3rem;
            backdrop-filter: blur(5px);
            position: relative;
        }
        
        .story-block::before {
            content: '['; position: absolute; top: 0; left: 0; font-size: 40px; color: var(--matrix-green); line-height: 40px;
        }
        .story-block::after {
            content: ']'; position: absolute; bottom: 0; right: 0; font-size: 40px; color: var(--matrix-green); line-height: 40px;
        }

        .story-title {
            color: var(--matrix-green);
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            text-shadow: 0 0 10px var(--matrix-dark-green);
        }

        .story-p {
            font-size: 1.2rem;
            line-height: 1.8;
            color: #ccc;
            margin-bottom: 1.5rem;
        }

        /* --- GRID CARDS --- */
        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
            max-width: 1400px;
            width: 100%;
        }

        .cyber-card {
            background: rgba(0, 15, 0, 0.9);
            border: 1px solid rgba(0, 255, 65, 0.3);
            padding: 2.5rem;
            backdrop-filter: blur(10px);
            transition: 0.3s;
            position: relative;
            overflow: hidden;
        }

        .cyber-card:hover {
            border-color: var(--matrix-green);
            transform: translateY(-5px);
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.2);
        }

        .hologram-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--matrix-green);
            text-shadow: 0 0 10px var(--matrix-green);
        }

        /* --- SHIP HUD --- */
        .ship-hud {
            position: absolute;
            left: 5%;
            top: 50%;
            transform: translateY(-50%);
            width: 400px;
            background: rgba(0, 10, 0, 0.9);
            border-left: 4px solid var(--matrix-green);
            padding: 30px;
            box-shadow: 0 0 30px rgba(0,0,0,0.8);
        }
        
        .bar-container {
            width: 100%; background: #051005; height: 10px; margin-bottom: 15px; margin-top: 5px; border: 1px solid #0f0;
        }
        .bar-fill {
            height: 100%; background: var(--matrix-green);
            width: 0%;
            transition: width 1s;
            box-shadow: 0 0 10px var(--matrix-green);
        }

        /* --- CONTACT FORM --- */
        .terminal-form {
            background: rgba(0, 5, 0, 0.95);
            border: 1px solid var(--matrix-green);
            padding: 4rem;
            width: 100%;
            max-width: 700px;
            box-shadow: 0 0 50px rgba(0, 255, 65, 0.1);
        }

        input, textarea {
            width: 100%;
            background: #000;
            border: 1px solid #333;
            border-left: 2px solid var(--matrix-green);
            color: var(--matrix-green);
            padding: 15px;
            font-family: 'Share Tech Mono';
            font-size: 1.1rem;
            outline: none;
            transition: 0.3s;
        }
        
        input:focus, textarea:focus {
            border-color: var(--matrix-green);
            box-shadow: 0 0 15px rgba(0, 255, 65, 0.2);
        }

        /* --- UTILS --- */
        .glitch-text { animation: glitch-anim 3s infinite; }
        @keyframes glitch-anim {
            0% { text-shadow: 2px 0 var(--matrix-dark-green), -2px 0 var(--matrix-green); }
            2% { text-shadow: 2px 0 var(--matrix-dark-green), -2px 0 var(--matrix-green); }
            5% { text-shadow: -2px 0 var(--matrix-dark-green), 2px 0 var(--matrix-green); }
            100% { text-shadow: none; }
        }

        .scroll-progress {
            position: fixed;
            bottom: 0; left: 0;
            height: 4px;
            background: var(--matrix-green);
            width: 0%;
            z-index: 100;
            box-shadow: 0 0 10px var(--matrix-green);
        }

        @media (max-width: 768px) {
            .grid-3 { grid-template-columns: 1fr; }
            .base-layer h1, .reveal-layer h1 { font-size: 12vw; }
            .ship-hud { position: relative; left: 0; width: 100%; top: auto; transform: none; margin-bottom: 2rem;}
            .cta-btn { margin-top: 150px; }
            section { padding: 1rem; }
        }
    </style>
</head>
<body>

    <!-- BACKGROUNDS -->
    <canvas id="matrix-bg"></canvas>
    <canvas id="webgl-canvas"></canvas>
    <div class="scroll-progress"></div>

    <!-- UI LAYER (SECTIONS) -->
    <div id="ui-layer">
        
        <!-- SECTION 1: HERO -->
        <section id="hero">
            <div class="hero-container">
                <div class="text-layer base-layer">
                    <h1>CYBERPUNK</h1>
                    <h1>AGENCY</h1>
                    <p class="terminal-text">> SECURE CONNECTION ESTABLISHED</p>
                </div>
                <div class="text-layer reveal-layer">
                    <h1>CYBERPUNK</h1>
                    <h1>AGENCY</h1>
                    <p class="terminal-text">> ACCESS LEVEL: GOD MODE</p>
                </div>
                <button class="cta-btn" onclick="scrollToSection(1)">ENTER THE MATRIX</button>
            </div>
        </section>

        <!-- SECTION 2: MANIFESTO (STORYTELLING) -->
        <section id="manifesto">
            <div class="story-block">
                <h2 class="story-title glitch-text">WE ARE THE GLITCH</h2>
                <p class="story-p">
                    In a world run by algorithms, privacy is a myth. Corporations harvest your data. Governments watch your every move. 
                </p>
                <p class="story-p">
                    Cyberpunk Agency exists in the shadows between the 0s and 1s. We are the white-hat architects of the new digital order. We don't just secure networks; we rewrite the rules of engagement.
                </p>
                <p class="terminal-text" style="display: inline-block;">> SYSTEM STATUS: COMPROMISED // REBOOTING...</p>
            </div>
        </section>

        <!-- SECTION 3: SERVICES -->
        <section id="services">
            <h2 class="story-title" style="margin-bottom: 3rem;">OPERATIONAL MODULES</h2>
            <div class="grid-3">
                <div class="cyber-card">
                    <div class="hologram-icon">üõ°Ô∏è</div>
                    <h3>RED TEAMING</h3>
                    <p style="margin-top: 1rem; color: #ccc;">
                        We simulate advanced persistent threats (APT) to expose vulnerabilities before the enemy does. Full-spectrum penetration testing.
                    </p>
                    <p class="terminal-text" style="font-size: 0.8rem; margin-top: 1rem;">> DEPLOYING PAYLOAD</p>
                </div>
                <div class="cyber-card">
                    <div class="hologram-icon">üîì</div>
                    <h3>ZERO-DAY RESEARCH</h3>
                    <p style="margin-top: 1rem; color: #ccc;">
                        Proprietary exploit discovery. We find the holes in the "unbreakable" software used by Fortune 500s.
                    </p>
                    <p class="terminal-text" style="font-size: 0.8rem; margin-top: 1rem;">> EXPLOIT FOUND</p>
                </div>
                <div class="cyber-card">
                    <div class="hologram-icon">üîê</div>
                    <h3>QUANTUM ENCRYPTION</h3>
                    <p style="margin-top: 1rem; color: #ccc;">
                        Post-quantum cryptographic defense. Protecting your data against the supercomputers of tomorrow.
                    </p>
                    <p class="terminal-text" style="font-size: 0.8rem; margin-top: 1rem;">> KEY GENERATED</p>
                </div>
            </div>
        </section>

        <!-- SECTION 4: THE WEAPON (SHIP) -->
        <section id="ship">
            <div style="width: 100%; max-width: 1400px; display: flex; justify-content: flex-start;">
                <div class="ship-hud">
                    <h2 class="glitch-text" style="color: var(--matrix-green)">THE INFILTRATOR</h2>
                    <p style="color: #aaa; margin-bottom: 20px; font-size: 0.9rem;">PROPRIETARY AI-DRIVEN BREACH TOOL</p>
                    
                    <p class="story-p" style="font-size: 1rem;">
                        Our custom-built neural network navigator allows us to traverse the deep web undetected. It mimics organic traffic patterns, rendering traditional firewalls useless.
                    </p>

                    <div style="margin-top: 2rem;">
                        <span style="font-size: 0.8rem; color: var(--matrix-green)">POLYMORPHIC ENGINE</span>
                        <div class="bar-container"><div class="bar-fill" style="width: 98%"></div></div>
                    </div>
                    <div>
                        <span style="font-size: 0.8rem; color: var(--matrix-green)">STEALTH SIGNATURE</span>
                        <div class="bar-container"><div class="bar-fill" style="width: 100%"></div></div>
                    </div>

                    <p class="terminal-text" style="margin-top: 20px;">> STATUS: CLOAKING ACTIVE</p>
                </div>
            </div>
        </section>

        <!-- SECTION 5: MISSION LOG -->
        <section id="missions">
            <div class="story-block" style="margin-bottom: 2rem;">
                <h2 class="story-title">TARGET LOG</h2>
                <p class="story-p">
                    We don't speak about our clients. But the results speak for themselves. Secure servers breached. Assets recovered. Corporate espionage neutralized.
                </p>
            </div>
            
            <div class="grid-3">
                <div class="cyber-card">
                    <h4 style="color: var(--matrix-green)">OP: BANK HEIST</h4>
                    <p style="font-size: 0.9rem; color: #888;">TARGET: GLOBAL FINANCE CORP</p>
                    <p style="margin-top: 10px;">Identified a $50M vulnerability in SWIFT transfer protocols.</p>
                    <p style="font-size: 0.8rem; color: var(--matrix-green); margin-top: 10px;">[PATCHED]</p>
                </div>
                <div class="cyber-card">
                    <h4 style="color: var(--matrix-green)">OP: BLACKOUT</h4>
                    <p style="font-size: 0.9rem; color: #888;">TARGET: ENERGY GRID</p>
                    <p style="margin-top: 10px;">Simulated a nation-state attack on critical infrastructure.</p>
                    <p style="font-size: 0.8rem; color: var(--matrix-green); margin-top: 10px;">[SECURED]</p>
                </div>
                <div class="cyber-card">
                    <h4 style="color: var(--matrix-green)">OP: SILENT VOTE</h4>
                    <p style="font-size: 0.9rem; color: #888;">TARGET: E-VOTING SYSTEM</p>
                    <p style="margin-top: 10px;">Exposed data leak in biometric authentication database.</p>
                    <p style="font-size: 0.8rem; color: var(--matrix-green); margin-top: 10px;">[HARDENED]</p>
                </div>
            </div>
        </section>

        <!-- SECTION 6: CONTACT -->
        <section id="contact">
            <div class="terminal-form">
                <h2 class="glitch-text" style="color: var(--matrix-green); margin-bottom: 1rem;">SECURE UPLINK</h2>
                <p style="margin-bottom: 2rem; color: #888;">
                    The channel is encrypted with AES-256. We are listening. Describe your threat model.
                </p>
                <form onsubmit="event.preventDefault(); alert('ENCRYPTED PAYLOAD SENT. WE WILL FIND YOU.');">
                    <div class="input-group" style="margin-bottom: 1.5rem;">
                        <label>> AGENT ALIAS:</label>
                        <input type="text" placeholder="Ghost_01" required>
                    </div>
                    <div class="input-group" style="margin-bottom: 1.5rem;">
                        <label>> SECURE FREQUENCY (EMAIL):</label>
                        <input type="email" placeholder="trace@impossible.net" required>
                    </div>
                    <div class="input-group" style="margin-bottom: 1.5rem;">
                        <label>> MISSION BRIEF:</label>
                        <textarea rows="4" placeholder="They are watching me..." required></textarea>
                    </div>
                    <button class="cta-btn" style="width: 100%; margin-top: 0;">
                        INITIATE HANDSHAKE
                    </button>
                </form>
            </div>
        </section>

    </div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --------------------------------------------------------
        // 1. MATRIX RAIN EFFECT (2D Canvas)
        // --------------------------------------------------------
        const matrixCanvas = document.getElementById('matrix-bg');
        const mCtx = matrixCanvas.getContext('2d');
        
        matrixCanvas.width = window.innerWidth;
        matrixCanvas.height = window.innerHeight;

        const chars = '0123456789ABCDEF';
        const fontSize = 14;
        const columns = matrixCanvas.width / fontSize;
        const drops = [];

        for(let i = 0; i < columns; i++) drops[i] = 1;

        function drawMatrix() {
            // Lower opacity for trail effect
            mCtx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            mCtx.fillRect(0, 0, matrixCanvas.width, matrixCanvas.height);
            mCtx.fillStyle = '#0F0'; // Pure Green
            mCtx.font = fontSize + 'px monospace';

            for(let i = 0; i < drops.length; i++) {
                const text = chars.charAt(Math.floor(Math.random() * chars.length));
                mCtx.fillText(text, i * fontSize, drops[i] * fontSize);
                
                if(drops[i] * fontSize > matrixCanvas.height && Math.random() > 0.975)
                    drops[i] = 0;
                drops[i]++;
            }
        }
        setInterval(drawMatrix, 30);

        // --------------------------------------------------------
        // 2. THREE.JS WORLD SETUP
        // --------------------------------------------------------
        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x000000, 0.002); // Dense fog for mystery

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 2000);
        camera.position.z = 0;

        const renderer = new THREE.WebGLRenderer({
            canvas: document.getElementById('webgl-canvas'),
            alpha: true,
            antialias: true
        });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

        // --- OBJECTS ---
        
        // 1. REMOVED HERO ORB AS REQUESTED

        // 2. TUNNEL (Particles) - Changed to Green
        const tunnelGeo = new THREE.BufferGeometry();
        const tunnelCount = 3000; // More particles
        const tunnelPos = new Float32Array(tunnelCount * 3);
        for(let i=0; i<tunnelCount*3; i+=3) {
            const angle = Math.random() * Math.PI * 2;
            const radius = 20 + Math.random() * 80;
            tunnelPos[i] = Math.cos(angle) * radius; // x
            tunnelPos[i+1] = Math.sin(angle) * radius; // y
            tunnelPos[i+2] = -50 - Math.random() * 450; // z depth
        }
        tunnelGeo.setAttribute('position', new THREE.BufferAttribute(tunnelPos, 3));
        const tunnelMat = new THREE.PointsMaterial({ color: 0x00ff41, size: 0.4, transparent: true, opacity: 0.8 });
        const tunnelMesh = new THREE.Points(tunnelGeo, tunnelMat);
        scene.add(tunnelMesh);

        // 3. SERVICE CUBES - Z: -350
        const servicesGroup = new THREE.Group();
        servicesGroup.position.z = -350;
        const boxGeo = new THREE.BoxGeometry(12, 12, 12);
        
        const cube1 = new THREE.Mesh(boxGeo, new THREE.MeshBasicMaterial({color: 0x00ff41, wireframe: true}));
        cube1.position.x = -30;
        const cube2 = new THREE.Mesh(boxGeo, new THREE.MeshBasicMaterial({color: 0x00ff41, wireframe: true}));
        cube2.position.x = 0;
        const cube3 = new THREE.Mesh(boxGeo, new THREE.MeshBasicMaterial({color: 0x00ff41, wireframe: true}));
        cube3.position.x = 30;
        
        servicesGroup.add(cube1, cube2, cube3);
        scene.add(servicesGroup);

        // 4. SPACESHIP - Z: -450
        const shipGroup = new THREE.Group();
        shipGroup.position.z = -450;
        
        // Body (Green Wireframe)
        const shipBodyGeo = new THREE.ConeGeometry(5, 25, 4);
        const shipMat = new THREE.MeshBasicMaterial({ color: 0x00ff41, wireframe: true });
        const shipBody = new THREE.Mesh(shipBodyGeo, shipMat);
        shipBody.rotation.x = Math.PI / 2;
        
        // Wings
        const wingGeo = new THREE.BufferGeometry();
        const wingVertices = new Float32Array([
            0, 0, 5,   15, 0, -10,   0, 0, -10,
            0, 0, 5,   -15, 0, -10,  0, 0, -10
        ]);
        wingGeo.setAttribute('position', new THREE.BufferAttribute(wingVertices, 3));
        const wingMesh = new THREE.Mesh(wingGeo, new THREE.MeshBasicMaterial({ color: 0x008F11, wireframe: true, side: THREE.DoubleSide }));
        
        shipGroup.add(shipBody, wingMesh);
        scene.add(shipGroup);

        // 5. MISSION ARTIFACTS - Z: -550
        const missionsGroup = new THREE.Group();
        missionsGroup.position.z = -550;
        for(let i=0; i<8; i++) {
            const angle = (i / 8) * Math.PI * 2;
            const radius = 35;
            const shapeGeo = new THREE.OctahedronGeometry(3);
            const shape = new THREE.Mesh(shapeGeo, new THREE.MeshBasicMaterial({ color: 0x00ff41, wireframe: true }));
            shape.position.set(Math.cos(angle)*radius, Math.sin(angle)*radius, 0);
            missionsGroup.add(shape);
        }
        scene.add(missionsGroup);

        // 6. CONTACT PORTAL - Z: -650
        const portalGeo = new THREE.TorusGeometry(25, 1, 16, 100);
        const portalMesh = new THREE.Mesh(portalGeo, new THREE.MeshBasicMaterial({ color: 0x00ff41, wireframe: true }));
        portalMesh.position.z = -650;
        scene.add(portalMesh);


        // --- ANIMATION LOOP ---
        function animate() {
            requestAnimationFrame(animate);

            // Tunnel Rotation
            tunnelMesh.rotation.z += 0.001;

            // Services Rotation
            cube1.rotation.y += 0.01;
            cube1.rotation.x += 0.005;
            cube2.rotation.y -= 0.01;
            cube3.rotation.z += 0.01;

            // Ship Idle
            shipGroup.rotation.z = Math.sin(Date.now() * 0.001) * 0.1;
            shipGroup.rotation.y += 0.002;

            // Portal Rotation
            portalMesh.rotation.z -= 0.005;
            
            // Missions Rotation
            missionsGroup.rotation.z -= 0.002;
            missionsGroup.children.forEach(child => {
                child.rotation.x += 0.02;
                child.rotation.y += 0.02;
            });

            renderer.render(scene, camera);
        }
        animate();


        // --------------------------------------------------------
        // 3. GSAP SCROLL LOGIC
        // --------------------------------------------------------
        gsap.registerPlugin(ScrollTrigger);

        // Increase virtual scroll height for better storytelling pacing
        const totalScroll = 6000;
        document.body.style.height = `${totalScroll}px`;

        const sections = [
            document.getElementById('hero'),
            document.getElementById('manifesto'),
            document.getElementById('services'),
            document.getElementById('ship'),
            document.getElementById('missions'),
            document.getElementById('contact')
        ];

        // Z-Positions for camera corresponding to sections
        const zStops = [0, -100, -350, -450, -550, -650];

        // Main Timeline
        let tl = gsap.timeline({
            scrollTrigger: {
                trigger: "body",
                start: "top top",
                end: "bottom bottom",
                scrub: 0.8,
                onUpdate: (self) => {
                    document.querySelector('.scroll-progress').style.width = (self.progress * 100) + '%';
                }
            }
        });

        // 1. Camera Movement
        tl.to(camera.position, {
            z: -700, 
            ease: "none",
            duration: 10
        });

        // 2. Section Visibility Logic
        sections.forEach((section, index) => {
            if (index === 0) {
                // Fade out Hero quickly
                gsap.to(section, {
                    scrollTrigger: {
                        trigger: "body",
                        start: "top top",
                        end: "600px top",
                        scrub: true
                    },
                    opacity: 0,
                    pointerEvents: "none"
                });
            } else {
                // Others Fade In then Out
                const targetZ = zStops[index];
                const scrollPos = (Math.abs(targetZ) / 700) * totalScroll;
                
                // Fade In
                gsap.fromTo(section, 
                    { opacity: 0, pointerEvents: "none", scale: 0.9, y: 50 },
                    {
                        scrollTrigger: {
                            trigger: "body",
                            start: `${scrollPos - 600}px top`,
                            end: `${scrollPos}px top`,
                            scrub: true,
                        },
                        opacity: 1,
                        pointerEvents: "auto",
                        scale: 1,
                        y: 0
                    }
                );
                
                // Fade Out (except last section)
                if(index < sections.length - 1) {
                    gsap.to(section, {
                        scrollTrigger: {
                            trigger: "body",
                            start: `${scrollPos + 600}px top`,
                            end: `${scrollPos + 1000}px top`,
                            scrub: true
                        },
                        opacity: 0,
                        pointerEvents: "none",
                        scale: 1.1
                    });
                }
            }
        });


        // --------------------------------------------------------
        // 4. MOUSE REVEAL LOGIC
        // --------------------------------------------------------
        const heroContainer = document.querySelector('.hero-container');
        const revealLayer = document.querySelector('.reveal-layer');
        let mX = 0, mY = 0;
        let cX = 0, cY = 0;

        document.addEventListener('mousemove', (e) => {
            mX = e.clientX;
            mY = e.clientY;
        });

        function animateReveal() {
            cX += (mX - cX) * 0.1;
            cY += (mY - cY) * 0.1;
            revealLayer.style.clipPath = `circle(150px at ${cX}px ${cY}px)`;
            requestAnimationFrame(animateReveal);
        }
        animateReveal();

        // --------------------------------------------------------
        // 5. RESIZE
        // --------------------------------------------------------
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            
            matrixCanvas.width = window.innerWidth;
            matrixCanvas.height = window.innerHeight;
        });

        window.scrollToSection = (index) => {
            const targetZ = zStops[index]; 
            const px = (Math.abs(targetZ) / 700) * totalScroll;
            window.scrollTo({ top: px, behavior: 'smooth' });
        };

    </script>
</body>
</html>